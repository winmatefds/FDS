
#define __SAA7119_C__

//******************************************************************************
// COPYRIGHT (C) STMicroelectronics 2011.
//
// All rights reserved. This document contains proprietary and
// confidential information of the STMicroelectronics Group. This
// document is not to be copied in whole or part. STMicroelectronics
// assumes no responsibility for the consequences of use of such
// information nor for any infringement of patents or other rights of
// third parties which may result from its use. No license is granted by
// implication or otherwise under any patent or patent rights of
// STMicroelectronics.
// STMicroelectronics
// products are not authorized for use as critical components in life
// support devices or systems without express written approval of
// STMicroelectronics.
//==============================================================================
//
// MODULE:     saa7119.c
//
// USAGE:      Contains Functions related to video decoder SAA7119
//
//******************************************************************************

//******************************************************************************
//  I N C L U D E    F I L E S
//******************************************************************************

#include "System\all.h"

#ifdef SAA7119_DEV_ID

//#define DEBUG_VDD
#if DEBUG_VDD
#define msg(a,b)   gm_Print((const char far *)a,b)
#else
#define msg(a,b)
#endif

//******************************************************************************
//  L O C A L    D E F I N I T I O N S
//******************************************************************************

#define SAA7119_VID_MODE_STAT_MASK   0x03
#define SAA7119_VID_FIELD_FRQ_MASK     0x20

// Register Address of SA7119
#define SAA7119_AIN1_ADDR       0x02
#define SAA7119_BRT_ADDR        0x0A
#define SAA7119_CON_ADDR        0x0B
#define SAA7119_SAT_ADDR        0x0C
#define SAA7119_HUE_ADDR        0x0D
#define SAA7119_DEC_STAT_ADDR   0x1E
#define SAA7119_DEC_STAT_ADDR2  0x1F
#define SAA7119_LUMINANCE   0x09
#define SAA7119_OVERLAY     0x27

//******************************************************************************
//  G L O B A L    V A R I A B L E S
//******************************************************************************

VIDEO_DECODER_ gmv_VideoDecoder[NUM_DECODER];

//******************************************************************************
//  S T A T I C    V A R I A B L E S
//******************************************************************************

//******************************************************************************
//  S T A T I C    F U N C T I O N    P R O T O T Y P E S
//******************************************************************************

BYTE dev_saa7119Read(BYTE Device_ID, BYTE B_RegAddr);
void dev_saa7119Write(BYTE B_RegAddr, BYTE B_Value);

//******************************************************************************
//  C O D E
//******************************************************************************


//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119Read(BYTE Device_ID, BYTE B_RegAddr)
//
// USAGE          : Wrapper function for I2C Read for SAA7119
//
// INPUT          : Device_ID
//                  B_RegAddr - the register address that need to be read
//
// OUTPUT         : The value read from the register
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119Read(BYTE Device_ID, BYTE B_RegAddr)
{
   BYTE rdata;
   BYTE address;

   address = B_RegAddr;

   gm_Write2WireBlock(2, Device_ID, (BYTE *)&address, 1, FALSE);
   gm_Read2WireBlock(2, Device_ID, (BYTE *)&rdata, 1, TRUE);

   return rdata;
}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119Write(BYTE B_RegAddr, BYTE B_Value)
//
// USAGE          : Wrapper function for I2C Write for SAA7119
//
// INPUT          : B_RegAddr - the register address
//                  B_Value - the value
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119Write(BYTE B_RegAddr, BYTE B_Value)
{

   BYTE  temp[2];


   temp[0] = B_RegAddr;
   temp[1] = B_Value;

   gm_Write2WireBlock (RING0, SAA7119_DEV_ID, (BYTE *)&temp, 2, STOP_BIT);
}

//******************************************************************************
//
// FUNCTION       : void SAA7119I2CWrite(BYTE Device_ID,BYTE B_RegAddr, BYTE B_Value)
//
// USAGE          :
//
// INPUT          : Device_ID
//                  B_RegAddr
//                  B_Value
//
// OUTPUT         : None
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void SAA7119I2CWrite(BYTE Device_ID,BYTE B_RegAddr, BYTE B_Value)
{
   BYTE  temp[2];


   temp[0] = B_RegAddr;
   temp[1] = B_Value;

   gm_Write2WireBlock (RING0, Device_ID, (BYTE *)&temp, 2, STOP_BIT);
}

//******************************************************************************
//
// FUNCTION       : void SAA7119_AVOUT(BYTE ucI2CAddress,BYTE ucChannel)
//
// USAGE          :
//
// INPUT          : ucI2CAddress
//                  ucChannel
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void SAA7119_AVOUT(BYTE ucI2CAddress,BYTE ucChannel)
{
   switch (ucChannel)
   {
      case SAA7119A_AVOUT_CHANNEL1:
         SAA7119I2CWrite(ucI2CAddress,SAA7119_AOSL,0x10);
         break;
      case SAA7119A_AVOUT_CHANNEL2:
         SAA7119I2CWrite(ucI2CAddress,SAA7119_AOSL,0x20);
         break;
      case SAA7119A_AVOUT_CHANNEL3:
         SAA7119I2CWrite(ucI2CAddress,SAA7119_AOSL,0x30);
         break;
      case SAA7119A_AVOUT_CHANNEL4:
         SAA7119I2CWrite(ucI2CAddress,SAA7119_AOSL,0x40);
         break;
   }
}

BYTE ROM saa7119Init_Table[][3] =
{
   {0x40, 0x00, 0x51}, {0x40, 0x01, 0x18}, {0x40, 0x02, 0x0e}, {0x40, 0x03, 0x40},
   {0x40, 0x04, 0xee}, {0x40, 0x05, 0xb2}, {0x40, 0x06, 0xeb}, {0x40, 0x07, 0xe0},
   {0x40, 0x08, 0xb0}, {0x40, 0x09, 0x50}, {0x40, 0x0a, 0x70}, {0x40, 0x0b, 0x44},
   {0x40, 0x0c, 0x40}, {0x40, 0x0d, 0x00}, {0x40, 0x0e, 0x09}, {0x40, 0x0f, 0x2b},
   {0x40, 0x10, 0x0e}, {0x40, 0x11, 0x00}, {0x40, 0x12, 0x8f}, {0x40, 0x13, 0x80},
   {0x40, 0x14, 0x14}, {0x40, 0x15, 0x10}, {0x40, 0x16, 0xfe}, {0x40, 0x17, 0x18},
   {0x40, 0x18, 0x40}, {0x40, 0x19, 0x80}, {0x40, 0x1a, 0x77}, {0x40, 0x1b, 0x52},
   {0x40, 0x1c, 0xdd}, {0x40, 0x1d, 0x02}, {0x40, 0x1e, 0x81}, {0x40, 0x1f, 0xb1},
   {0x40, 0x20, 0xd0}, {0x40, 0x21, 0x00}, {0x40, 0x22, 0xb2}, {0x40, 0x23, 0xb2},
   {0x40, 0x24, 0x00}, {0x40, 0x25, 0x00}, {0x40, 0x26, 0x00}, {0x40, 0x27, 0x00},
   {0x40, 0x28, 0x10}, {0x40, 0x29, 0x00}, {0x40, 0x2a, 0x80}, {0x40, 0x2b, 0x40},
   {0x40, 0x2c, 0x40}, {0x40, 0x2d, 0x00}, {0x40, 0x2e, 0x00}, {0x40, 0x2f, 0x00},
   {0x40, 0x30, 0xbc}, {0x40, 0x31, 0xdf}, {0x40, 0x32, 0x02}, {0x40, 0x34, 0xcd},
   {0x40, 0x35, 0xcc}, {0x40, 0x36, 0x3a}, {0x40, 0x38, 0x03}, {0x40, 0x39, 0x20},
   {0x40, 0x3a, 0x00}, {0x40, 0x3b, 0x3f}, {0x40, 0x3c, 0xd1}, {0x40, 0x3d, 0x31},
   {0x40, 0x3e, 0x03}, {0x40, 0x3f, 0x00}, {0x40, 0x40, 0x00}, {0x40, 0x41, 0xff},
   {0x40, 0x42, 0xff}, {0x40, 0x43, 0xff}, {0x40, 0x44, 0xff}, {0x40, 0x45, 0xff},
   {0x40, 0x46, 0xff}, {0x40, 0x47, 0xff}, {0x40, 0x48, 0xff}, {0x40, 0x49, 0xff},
   {0x40, 0x4a, 0xff}, {0x40, 0x4b, 0xff}, {0x40, 0x4c, 0xff}, {0x40, 0x4d, 0xff},
   {0x40, 0x4e, 0xff}, {0x40, 0x4f, 0xff}, {0x40, 0x50, 0xff}, {0x40, 0x51, 0xff},
   {0x40, 0x52, 0xff}, {0x40, 0x53, 0x55}, {0x40, 0x54, 0x44}, {0x40, 0x55, 0xff},
   {0x40, 0x56, 0xff}, {0x40, 0x57, 0xff}, {0x40, 0x58, 0x00}, {0x40, 0x59, 0x47},
   {0x40, 0x5a, 0x06}, {0x40, 0x5b, 0x83}, {0x40, 0x5d, 0x00}, {0x40, 0x5e, 0x00},
   {0x40, 0x60, 0x00}, {0x40, 0x61, 0x00}, {0x40, 0x62, 0x00}, {0x40, 0x63, 0x00},
   {0x40, 0x64, 0x00}, {0x40, 0x65, 0x00}, {0x40, 0x66, 0xae}, {0x40, 0x67, 0xff},
   {0x40, 0x68, 0xff}, {0x40, 0x69, 0x03}, {0x40, 0x6a, 0x80}, {0x40, 0x6b, 0xbe},
   {0x40, 0x6c, 0x00}, {0x40, 0x6d, 0x00}, {0x40, 0x6e, 0x00}, {0x40, 0x6f, 0xfe},
   {0x40, 0x70, 0xff}, {0x40, 0x71, 0x8f}, {0x40, 0x72, 0xae}, {0x40, 0x73, 0x00},
   {0x40, 0x74, 0x00}, {0x40, 0x75, 0x00}, {0x40, 0x76, 0x00}, {0x40, 0x77, 0x01},
   {0x40, 0x78, 0x00}, {0x40, 0x79, 0x00}, {0x40, 0x7a, 0x00}, {0x40, 0x7b, 0x00},
   {0x40, 0x7c, 0x00}, {0x40, 0x7d, 0x00}, {0x40, 0x7e, 0x00}, {0x40, 0x7f, 0x00},
   {0x40, 0x80, 0x90}, {0x40, 0x81, 0x00}, {0x40, 0x82, 0x00}, {0x40, 0x83, 0x11},
   {0x40, 0x84, 0x40}, {0x40, 0x85, 0x00}, {0x40, 0x86, 0x40}, {0x40, 0x87, 0x11},
   {0x40, 0x88, 0x20}, {0x40, 0x89, 0x00}, {0x40, 0x8a, 0x00}, {0x40, 0x8b, 0x00},
   {0x40, 0x8c, 0x00}, {0x40, 0x8f, 0x03}, {0x40, 0x90, 0x00}, {0x40, 0x91, 0x08},
   {0x40, 0x92, 0x00}, {0x40, 0x93, 0xc0}, {0x40, 0x94, 0x06}, {0x40, 0x95, 0x00},
   {0x40, 0x96, 0xd0}, {0x40, 0x97, 0x02}, {0x40, 0x98, 0x01}, {0x40, 0x99, 0x00},
   {0x40, 0x9a, 0x06}, {0x40, 0x9b, 0x81}, {0x40, 0x9c, 0xd0}, {0x40, 0x9d, 0x02},
   {0x40, 0x9e, 0x00}, {0x40, 0x9f, 0x01}, {0x40, 0xa0, 0x01}, {0x40, 0xa1, 0x00},
   {0x40, 0xa2, 0x00}, {0x40, 0xa4, 0x80}, {0x40, 0xa5, 0x40}, {0x40, 0xa6, 0x40},
   {0x40, 0xa8, 0x00}, {0x40, 0xa9, 0x04}, {0x40, 0xaa, 0x00}, {0x40, 0xac, 0x00},
   {0x40, 0xad, 0x02}, {0x40, 0xae, 0x00}, {0x40, 0xb0, 0x00}, {0x40, 0xb1, 0x04},
   {0x40, 0xb2, 0x00}, {0x40, 0xb3, 0x04}, {0x40, 0xb4, 0x40}, {0x40, 0xb5, 0x05},
   {0x40, 0xb6, 0x0c}, {0x40, 0xb7, 0xc3}, {0x40, 0xb8, 0x00}, {0x40, 0xb9, 0x00},
   {0x40, 0xba, 0x00}, {0x40, 0xbb, 0x00}, {0x40, 0xbc, 0x00}, {0x40, 0xbd, 0x00},
   {0x40, 0xbe, 0x00}, {0x40, 0xbf, 0x00}, {0x40, 0xc0, 0x03}, {0x40, 0xc1, 0x08},
   {0x40, 0xc2, 0x00}, {0x40, 0xc3, 0x80}, {0x40, 0xc4, 0x03}, {0x40, 0xc5, 0x00},
   {0x40, 0xc6, 0xd0}, {0x40, 0xc7, 0x02}, {0x40, 0xc8, 0x18}, {0x40, 0xc9, 0x00},
   {0x40, 0xca, 0x18}, {0x40, 0xcb, 0x01}, {0x40, 0xcc, 0xce}, {0x40, 0xcd, 0x02},
   {0x40, 0xce, 0x18}, {0x40, 0xcf, 0x01}, {0x40, 0xd0, 0x02}, {0x40, 0xd1, 0x01},
   {0x40, 0xd2, 0x01}, {0x40, 0xd4, 0x80}, {0x40, 0xd5, 0x20}, {0x40, 0xd6, 0x20},
   {0x40, 0xd8, 0x00}, {0x40, 0xd9, 0x04}, {0x40, 0xda, 0x00}, {0x40, 0xdc, 0x00},
   {0x40, 0xdd, 0x02}, {0x40, 0xde, 0x00}, {0x40, 0xe0, 0xf8}, {0x40, 0xe1, 0x07},
   {0x40, 0xe2, 0xf8}, {0x40, 0xe3, 0x07}, {0x40, 0xe4, 0x01}, {0x40, 0xe5, 0x05},
   {0x40, 0xe6, 0x00}, {0x40, 0xe7, 0x00}, {0x40, 0xe8, 0x07}, {0x40, 0xe9, 0x07},
   {0x40, 0xea, 0x07}, {0x40, 0xeb, 0x07}, {0x40, 0xec, 0x07}, {0x40, 0xed, 0x07},
   {0x40, 0xee, 0x07}, {0x40, 0xef, 0x00},
};

BYTE ROM saa7119Init_Table_ext[][3] =
{
   {0x48, 0x02, 0x33}, {0x48, 0x03, 0xfc}, {0x48, 0x04, 0x72}, {0x48, 0x05, 0x00},
   {0x48, 0x06, 0x00}, {0x48, 0x07, 0x00}, {0x48, 0x08, 0xa0}, {0x48, 0x09, 0x00},
   {0x48, 0x15, 0x01}, {0x48, 0x16, 0x03}, {0x48, 0x17, 0x00}, {0x48, 0x1e, 0x4a},
   {0x48, 0x1f, 0x00}, {0x48, 0x20, 0xff}, {0x48, 0x21, 0x5e}, {0x48, 0x22, 0x01},
   {0x48, 0x23, 0x01}, {0x48, 0x24, 0x44}, {0x48, 0x25, 0xf0}, {0x48, 0x26, 0x00},
   {0x48, 0x27, 0x01}, {0x48, 0x28, 0x04}, {0x48, 0x29, 0x10}, {0x48, 0x2a, 0xf0},
   {0x48, 0x2b, 0x80}, {0x48, 0x2c, 0x73}, {0x48, 0x2d, 0x06}, {0x48, 0x2e, 0x10},
   {0x48, 0x2f, 0x30}, {0x48, 0x30, 0xac}, {0x48, 0x31, 0x80}, {0x48, 0x32, 0x00},
   {0x48, 0x33, 0x00}, {0x48, 0x34, 0x00}, {0x48, 0x3b, 0x93}, {0x48, 0x3c, 0x17},
   {0x48, 0x3d, 0x00}, {0x48, 0x3e, 0x00}, {0x48, 0x3f, 0x00}, {0x48, 0x40, 0x58},
   {0x48, 0x41, 0x85}, {0x48, 0x42, 0x21}, {0x48, 0x43, 0x00}, {0x48, 0x44, 0xc4},
   {0x48, 0x45, 0x03}, {0x48, 0x46, 0x00}, {0x48, 0x47, 0x00}, {0x48, 0x48, 0xb0},
   {0x48, 0x49, 0x8e}, {0x48, 0x4a, 0x7f}, {0x48, 0x4b, 0xe7}, {0x48, 0x4c, 0x05},
   {0x48, 0x4d, 0x00}, {0x48, 0x4e, 0x00}, {0x48, 0x4f, 0x80}, {0x48, 0x50, 0x00},
   {0x48, 0x51, 0x00}, {0x48, 0x52, 0x00}, {0x48, 0x53, 0x00}, {0x48, 0x54, 0x00},
   {0x48, 0x55, 0x00}, {0x48, 0x56, 0x00}, {0x48, 0x57, 0x00}, {0x48, 0x58, 0x00},
   {0x48, 0x59, 0x00}, {0x48, 0x60, 0x00}, {0x48, 0x61, 0x00}, {0x48, 0x62, 0x0f},
   {0x48, 0x63, 0x00}, {0x48, 0x64, 0xf0}, {0x48, 0x65, 0x01}, {0x48, 0x66, 0xff},
   {0x48, 0x67, 0x01}, {0x48, 0x68, 0x00}, {0x48, 0x69, 0x3e}, {0x48, 0x6a, 0x0f},
   {0x48, 0x6b, 0x3e}, {0x48, 0x6c, 0xf0}, {0x48, 0x6d, 0x3f}, {0x48, 0x6e, 0xff},
   {0x48, 0x6f, 0x3f}, {0x48, 0x70, 0x08}, {0x48, 0x71, 0x61}, {0x48, 0x72, 0x00},
   {0x48, 0x80, 0x00}, {0x48, 0x81, 0x00}, {0x48, 0x82, 0x00}, {0x48, 0x83, 0x00},
   {0x48, 0x84, 0x00}, {0x48, 0x85, 0x00}, {0x48, 0x86, 0x00}, {0x48, 0x8c, 0x00},
   {0x48, 0x8d, 0x00}, {0x48, 0x8e, 0x00}, {0x48, 0x90, 0x10}, {0x48, 0x91, 0x20},
   {0x48, 0x92, 0x30}, {0x48, 0x93, 0x40}, {0x48, 0x94, 0x50}, {0x48, 0x95, 0x60},
   {0x48, 0x96, 0x70}, {0x48, 0x97, 0x80}, {0x48, 0x98, 0x90}, {0x48, 0x99, 0xa0},
   {0x48, 0x9a, 0xb0}, {0x48, 0x9b, 0xc0}, {0x48, 0x9c, 0xd0}, {0x48, 0x9d, 0xe0},
   {0x48, 0x9e, 0xf0}, {0x48, 0x9f, 0xff}, {0x48, 0xa0, 0x10}, {0x48, 0xa1, 0x20},
   {0x48, 0xa2, 0x30}, {0x48, 0xa3, 0x40}, {0x48, 0xa4, 0x50}, {0x48, 0xa5, 0x60},
   {0x48, 0xa7, 0x80}, {0x48, 0xa8, 0x90}, {0x48, 0xa9, 0xa0}, {0x48, 0xaa, 0xb0},
   {0x48, 0xab, 0xc0}, {0x48, 0xac, 0xd0}, {0x48, 0xad, 0xe0}, {0x48, 0xae, 0xf0},
   {0x48, 0xaf, 0xff}, {0x48, 0xb0, 0x10}, {0x48, 0xb1, 0x20}, {0x48, 0xb2, 0x30},
   {0x48, 0xb3, 0x40}, {0x48, 0xb4, 0x50}, {0x48, 0xb5, 0x60}, {0x48, 0xb6, 0x70},
   {0x48, 0xb7, 0x80}, {0x48, 0xb8, 0x90}, {0x48, 0xb9, 0xa0}, {0x48, 0xba, 0xb0},
   {0x48, 0xbb, 0xc0}, {0x48, 0xbc, 0xd0}, {0x48, 0xbd, 0xe0}, {0x48, 0xbe, 0xf0},
   {0x48, 0xbf, 0xff}, {0x48, 0xc0, 0x80}, {0x48, 0xc2, 0x00}, {0x48, 0xc3, 0x00},
   {0x48, 0xc4, 0x00}, {0x48, 0xc5, 0x00}, {0x48, 0xc6, 0x00}, {0x48, 0xc7, 0x00},
   {0x48, 0xd0, 0x01}, {0x48, 0xd1, 0xbe}, {0x48, 0xd2, 0x4a}, {0x48, 0xd3, 0xcb},
   {0x48, 0xd4, 0x64}, {0x48, 0xd5, 0x0c}, {0x48, 0xd6, 0x88}, {0x48, 0xd7, 0xba},
   {0x48, 0xd8, 0x10}, {0x48, 0xd9, 0x3c}, {0x48, 0xda, 0xf0}, {0x48, 0xdb, 0x9d},
   {0x48, 0xdc, 0xd2}, {0x48, 0xdd, 0x46}, {0x48, 0xde, 0x87}, {0x48, 0xdf, 0x39},
   {0x48, 0xe0, 0xad}, {0x48, 0xe1, 0x01}, {0x48, 0xe2, 0xd0}, {0x48, 0xe3, 0x35},
   {0x48, 0xe4, 0x88}, {0x48, 0xe5, 0x3f}, {0x48, 0xe6, 0xc1}, {0x48, 0xe7, 0x13},
   {0x48, 0xe8, 0x03}, {0x48, 0xe9, 0x00}, {0x48, 0xea, 0x40}, {0x48, 0xeb, 0xb4},
   {0x48, 0xec, 0x06}, {0x48, 0xed, 0x14}, {0x48, 0xee, 0x00}, {0x48, 0xef, 0x00},
   {0x48, 0xf0, 0x6b}, {0x48, 0xf1, 0x00}, {0x48, 0xf2, 0x00}, {0x48, 0xf3, 0x00},
   {0x48, 0xf4, 0x00}, {0x48, 0xf5, 0x00}, {0x48, 0xf6, 0x00}, {0x48, 0xf7, 0x00},
   {0x48, 0xf8, 0x00}, {0x48, 0xf9, 0x00}, {0x48, 0xfa, 0x00}, {0x48, 0xfb, 0x00},
   {0x48, 0xfc, 0x00}, {0x48, 0xfd, 0x00}, {0x48, 0xfe, 0x00}, {0x48, 0xff, 0x00},
};

BYTE ROM saa7119Svideo_Table[][3] =
{
   {0x40, 0x00, 0x50}, {0x40, 0x01, 0x17}, {0x40, 0x02, 0x18}, {0x40, 0x03, 0x43},
   {0x40, 0x04, 0x9c}, {0x40, 0x05, 0x9c}, {0x40, 0x06, 0xeb}, {0x40, 0x07, 0xe0},
   {0x40, 0x08, 0xb0}, {0x40, 0x09, 0xc0}, {0x40, 0x0a, 0x70}, {0x40, 0x0b, 0x44},
   {0x40, 0x0c, 0x40}, {0x40, 0x0d, 0x00}, {0x40, 0x0e, 0x83}, {0x40, 0x0f, 0x25},
   {0x40, 0x10, 0x06}, {0x40, 0x11, 0x00}, {0x40, 0x12, 0x8f}, {0x40, 0x13, 0x80},
   {0x40, 0x14, 0xa0}, {0x40, 0x15, 0x10}, {0x40, 0x16, 0xfe}, {0x40, 0x17, 0x28},
   {0x40, 0x18, 0x40}, {0x40, 0x19, 0x80}, {0x40, 0x1a, 0x77}, {0x40, 0x1b, 0x42},
   {0x40, 0x1c, 0xdd}, {0x40, 0x1d, 0x02}, {0x40, 0x1e, 0x81}, {0x40, 0x1f, 0xb1},
   {0x40, 0x20, 0xd0}, {0x40, 0x21, 0x03}, {0x40, 0x22, 0x9c}, {0x40, 0x23, 0x9c},
   {0x40, 0x24, 0x0e}, {0x40, 0x25, 0x07}, {0x40, 0x26, 0xa0}, {0x40, 0x27, 0x00},
   {0x40, 0x28, 0x10}, {0x40, 0x29, 0x00}, {0x40, 0x2a, 0x80}, {0x40, 0x2b, 0x40},
   {0x40, 0x2c, 0x40}, {0x40, 0x2d, 0x00}, {0x40, 0x2e, 0x00}, {0x40, 0x2f, 0x00},
   {0x40, 0x30, 0xbc}, {0x40, 0x31, 0xdf}, {0x40, 0x32, 0x02}, {0x40, 0x34, 0xcd},
   {0x40, 0x35, 0xcc}, {0x40, 0x36, 0x3a}, {0x40, 0x38, 0x03}, {0x40, 0x39, 0x20},
   {0x40, 0x3a, 0x00}, {0x40, 0x3b, 0x3f}, {0x40, 0x3c, 0xd1}, {0x40, 0x3d, 0x31},
   {0x40, 0x3e, 0x03}, {0x40, 0x3f, 0x00}, {0x40, 0x40, 0x00}, {0x40, 0x41, 0x00},
   {0x40, 0x42, 0x00}, {0x40, 0x43, 0x00}, {0x40, 0x44, 0x00}, {0x40, 0x45, 0x00},
   {0x40, 0x46, 0x00}, {0x40, 0x47, 0x00}, {0x40, 0x48, 0x00}, {0x40, 0x49, 0x00},
   {0x40, 0x4a, 0x00}, {0x40, 0x4b, 0x00}, {0x40, 0x4c, 0x00}, {0x40, 0x4d, 0x00},
   {0x40, 0x4e, 0x00}, {0x40, 0x4f, 0x00}, {0x40, 0x50, 0x00}, {0x40, 0x51, 0x00},
   {0x40, 0x52, 0x00}, {0x40, 0x53, 0x55}, {0x40, 0x54, 0x44}, {0x40, 0x55, 0xff},
   {0x40, 0x56, 0xff}, {0x40, 0x57, 0xff}, {0x40, 0x58, 0x40}, {0x40, 0x59, 0x47},
   {0x40, 0x5a, 0x06}, {0x40, 0x5b, 0x83}, {0x40, 0x5d, 0x01}, {0x40, 0x5e, 0x00},
   {0x40, 0x60, 0x00}, {0x40, 0x61, 0x00}, {0x40, 0x62, 0x00}, {0x40, 0x63, 0x00},
   {0x40, 0x64, 0x00}, {0x40, 0x65, 0x00}, {0x40, 0x66, 0xa3}, {0x40, 0x67, 0x00},
   {0x40, 0x68, 0x00}, {0x40, 0x69, 0x00}, {0x40, 0x6a, 0x00}, {0x40, 0x6b, 0xa3},
   {0x40, 0x6c, 0x00}, {0x40, 0x6d, 0x00}, {0x40, 0x6e, 0x00}, {0x40, 0x6f, 0x00},
   {0x40, 0x70, 0x00}, {0x40, 0x71, 0x00}, {0x40, 0x72, 0xa3}, {0x40, 0x73, 0x00},
   {0x40, 0x74, 0x00}, {0x40, 0x75, 0x00}, {0x40, 0x76, 0x00}, {0x40, 0x77, 0x01},
   {0x40, 0x78, 0x00}, {0x40, 0x79, 0x00}, {0x40, 0x7a, 0x00}, {0x40, 0x7b, 0x00},
   {0x40, 0x7c, 0x00}, {0x40, 0x7d, 0x00}, {0x40, 0x7e, 0x00}, {0x40, 0x7f, 0x00},
   {0x40, 0x80, 0x90}, {0x40, 0x81, 0x00}, {0x40, 0x82, 0x00}, {0x40, 0x83, 0x11},
   {0x40, 0x84, 0x00}, {0x40, 0x85, 0x00}, {0x40, 0x86, 0x40}, {0x40, 0x87, 0x31},
   {0x40, 0x88, 0x30}, {0x40, 0x89, 0x00}, {0x40, 0x8a, 0x00}, {0x40, 0x8b, 0x00},
   {0x40, 0x8c, 0x00}, {0x40, 0x8f, 0x08}, {0x40, 0x90, 0x00}, {0x40, 0x91, 0x08},
   {0x40, 0x92, 0x00}, {0x40, 0x93, 0xc0}, {0x40, 0x94, 0x02}, {0x40, 0x95, 0x00},
   {0x40, 0x96, 0xd0}, {0x40, 0x97, 0x02}, {0x40, 0x98, 0x01}, {0x40, 0x99, 0x00},
   {0x40, 0x9a, 0x07}, {0x40, 0x9b, 0x81}, {0x40, 0x9c, 0xd0}, {0x40, 0x9d, 0x02},
   {0x40, 0x9e, 0x00}, {0x40, 0x9f, 0x01}, {0x40, 0xa0, 0x01}, {0x40, 0xa1, 0x01},
   {0x40, 0xa2, 0x01}, {0x40, 0xa4, 0x80}, {0x40, 0xa5, 0x40}, {0x40, 0xa6, 0x40},
   {0x40, 0xa8, 0x00}, {0x40, 0xa9, 0x04}, {0x40, 0xaa, 0x00}, {0x40, 0xac, 0x00},
   {0x40, 0xad, 0x02}, {0x40, 0xae, 0x00}, {0x40, 0xb0, 0x00}, {0x40, 0xb1, 0x04},
   {0x40, 0xb2, 0x00}, {0x40, 0xb3, 0x00}, {0x40, 0xb4, 0x41}, {0x40, 0xb5, 0x15},
   {0x40, 0xb6, 0x33}, {0x40, 0xb7, 0xe3}, {0x40, 0xb8, 0x00}, {0x40, 0xb9, 0x00},
   {0x40, 0xba, 0x00}, {0x40, 0xbb, 0x00}, {0x40, 0xbc, 0x00}, {0x40, 0xbd, 0x00},
   {0x40, 0xbe, 0x00}, {0x40, 0xbf, 0x00}, {0x40, 0xc0, 0x03}, {0x40, 0xc1, 0x08},
   {0x40, 0xc2, 0x00}, {0x40, 0xc3, 0x80}, {0x40, 0xc4, 0x03}, {0x40, 0xc5, 0x00},
   {0x40, 0xc6, 0xd0}, {0x40, 0xc7, 0x02}, {0x40, 0xc8, 0x18}, {0x40, 0xc9, 0x00},
   {0x40, 0xca, 0x18}, {0x40, 0xcb, 0x01}, {0x40, 0xcc, 0xce}, {0x40, 0xcd, 0x02},
   {0x40, 0xce, 0x18}, {0x40, 0xcf, 0x01}, {0x40, 0xd0, 0x02}, {0x40, 0xd1, 0x01},
   {0x40, 0xd2, 0x01}, {0x40, 0xd4, 0x80}, {0x40, 0xd5, 0x20}, {0x40, 0xd6, 0x20},
   {0x40, 0xd8, 0x00}, {0x40, 0xd9, 0x04}, {0x40, 0xda, 0x00}, {0x40, 0xdc, 0x00},
   {0x40, 0xdd, 0x02}, {0x40, 0xde, 0x00}, {0x40, 0xe0, 0xf8}, {0x40, 0xe1, 0x07},
   {0x40, 0xe2, 0xf8}, {0x40, 0xe3, 0x07}, {0x40, 0xe4, 0x01}, {0x40, 0xe5, 0x05},
   {0x40, 0xe6, 0x00}, {0x40, 0xe7, 0x00}, {0x40, 0xe8, 0x07}, {0x40, 0xe9, 0x07},
   {0x40, 0xea, 0x07}, {0x40, 0xeb, 0x07}, {0x40, 0xec, 0x07}, {0x40, 0xed, 0x07},
   {0x40, 0xee, 0x07}, {0x40, 0xef, 0x00},
};

BYTE ROM saa7119Svideo_Table_ext[][3] =
{
   {0x48, 0x02, 0x33}, {0x48, 0x03, 0xfc}, {0x48, 0x04, 0x72}, {0x48, 0x05, 0x00},
   {0x48, 0x06, 0x00}, {0x48, 0x07, 0x00}, {0x48, 0x08, 0xa0}, {0x48, 0x09, 0x00},
   {0x48, 0x15, 0x01}, {0x48, 0x16, 0x03}, {0x48, 0x17, 0x00}, {0x48, 0x1e, 0x4a},
   {0x48, 0x1f, 0x00}, {0x48, 0x20, 0xff}, {0x48, 0x21, 0x5e}, {0x48, 0x22, 0x01},
   {0x48, 0x23, 0x01}, {0x48, 0x24, 0x44}, {0x48, 0x25, 0xf0}, {0x48, 0x26, 0x00},
   {0x48, 0x27, 0x01}, {0x48, 0x28, 0x04}, {0x48, 0x29, 0x10}, {0x48, 0x2a, 0xf0},
   {0x48, 0x2b, 0x80}, {0x48, 0x2c, 0x73}, {0x48, 0x2d, 0x06}, {0x48, 0x2e, 0x10},
   {0x48, 0x2f, 0x2e}, {0x48, 0x30, 0xac}, {0x48, 0x31, 0x80}, {0x48, 0x32, 0x00},
   {0x48, 0x33, 0x00}, {0x48, 0x34, 0x00}, {0x48, 0x3b, 0x93}, {0x48, 0x3c, 0x17},
   {0x48, 0x3d, 0x00}, {0x48, 0x3e, 0x00}, {0x48, 0x3f, 0x00}, {0x48, 0x40, 0x00},
   {0x48, 0x41, 0x00}, {0x48, 0x42, 0x20}, {0x48, 0x43, 0xb4}, {0x48, 0x44, 0xc6},
   {0x48, 0x45, 0x03}, {0x48, 0x46, 0x00}, {0x48, 0x47, 0x00}, {0x48, 0x48, 0x70},
   {0x48, 0x49, 0x8f}, {0x48, 0x4a, 0x5f}, {0x48, 0x4b, 0xc1}, {0x48, 0x4c, 0x02},
   {0x48, 0x4d, 0x00}, {0x48, 0x4e, 0x3f}, {0x48, 0x4f, 0x87}, {0x48, 0x50, 0x00},
   {0x48, 0x51, 0x00}, {0x48, 0x52, 0x00}, {0x48, 0x53, 0x00}, {0x48, 0x54, 0x00},
   {0x48, 0x55, 0x00}, {0x48, 0x56, 0x00}, {0x48, 0x57, 0x00}, {0x48, 0x58, 0x00},
   {0x48, 0x59, 0x00}, {0x48, 0x60, 0x00}, {0x48, 0x61, 0x00}, {0x48, 0x62, 0x0f},
   {0x48, 0x63, 0x00}, {0x48, 0x64, 0xf0}, {0x48, 0x65, 0x01}, {0x48, 0x66, 0xff},
   {0x48, 0x67, 0x01}, {0x48, 0x68, 0x00}, {0x48, 0x69, 0x3e}, {0x48, 0x6a, 0x0f},
   {0x48, 0x6b, 0x3e}, {0x48, 0x6c, 0xf0}, {0x48, 0x6d, 0x3f}, {0x48, 0x6e, 0xff},
   {0x48, 0x6f, 0x3f}, {0x48, 0x70, 0x08}, {0x48, 0x71, 0x61}, {0x48, 0x72, 0x00},
   {0x48, 0x80, 0x00}, {0x48, 0x81, 0x00}, {0x48, 0x82, 0x00}, {0x48, 0x83, 0x00},
   {0x48, 0x84, 0x00}, {0x48, 0x85, 0x00}, {0x48, 0x86, 0x00}, {0x48, 0x8c, 0x00},
   {0x48, 0x8d, 0x00}, {0x48, 0x8e, 0x00}, {0x48, 0x90, 0x10}, {0x48, 0x91, 0x20},
   {0x48, 0x92, 0x30}, {0x48, 0x93, 0x40}, {0x48, 0x94, 0x50}, {0x48, 0x95, 0x60},
   {0x48, 0x96, 0x70}, {0x48, 0x97, 0x80}, {0x48, 0x98, 0x90}, {0x48, 0x99, 0xa0},
   {0x48, 0x9a, 0xb0}, {0x48, 0x9b, 0xc0}, {0x48, 0x9c, 0xd0}, {0x48, 0x9d, 0xe0},
   {0x48, 0x9e, 0xf0}, {0x48, 0x9f, 0xff}, {0x48, 0xa0, 0x10}, {0x48, 0xa1, 0x20},
   {0x48, 0xa2, 0x30}, {0x48, 0xa3, 0x40}, {0x48, 0xa4, 0x50}, {0x48, 0xa5, 0x60},
   {0x48, 0xa7, 0x80}, {0x48, 0xa8, 0x90}, {0x48, 0xa9, 0xa0}, {0x48, 0xaa, 0xb0},
   {0x48, 0xab, 0xc0}, {0x48, 0xac, 0xd0}, {0x48, 0xad, 0xe0}, {0x48, 0xae, 0xf0},
   {0x48, 0xaf, 0xff}, {0x48, 0xb0, 0x10}, {0x48, 0xb1, 0x20}, {0x48, 0xb2, 0x30},
   {0x48, 0xb3, 0x40}, {0x48, 0xb4, 0x50}, {0x48, 0xb5, 0x60}, {0x48, 0xb6, 0x70},
   {0x48, 0xb7, 0x80}, {0x48, 0xb8, 0x90}, {0x48, 0xb9, 0xa0}, {0x48, 0xba, 0xb0},
   {0x48, 0xbb, 0xc0}, {0x48, 0xbc, 0xd0}, {0x48, 0xbd, 0xe0}, {0x48, 0xbe, 0xf0},
   {0x48, 0xbf, 0xff}, {0x48, 0xc0, 0x00}, {0x48, 0xc2, 0x00}, {0x48, 0xc3, 0x00},
   {0x48, 0xc4, 0x00}, {0x48, 0xc5, 0x00}, {0x48, 0xc6, 0x00}, {0x48, 0xc7, 0x00},
   {0x48, 0xd0, 0x79}, {0x48, 0xd1, 0xe0}, {0x48, 0xd2, 0xd7}, {0x48, 0xd3, 0xe6},
   {0x48, 0xd4, 0x22}, {0x48, 0xd5, 0xf0}, {0x48, 0xd6, 0x21}, {0x48, 0xd7, 0xe8},
   {0x48, 0xd8, 0xf4}, {0x48, 0xd9, 0xca}, {0x48, 0xda, 0xff}, {0x48, 0xdb, 0xff},
   {0x48, 0xdc, 0x1d}, {0x48, 0xdd, 0xf8}, {0x48, 0xde, 0x8f}, {0x48, 0xdf, 0x92},
   {0x48, 0xe0, 0xad}, {0x48, 0xe1, 0x01}, {0x48, 0xe2, 0xd0}, {0x48, 0xe3, 0x35},
   {0x48, 0xe4, 0x88}, {0x48, 0xe5, 0x3f}, {0x48, 0xe6, 0xc1}, {0x48, 0xe7, 0x13},
   {0x48, 0xe8, 0x03}, {0x48, 0xe9, 0x00}, {0x48, 0xea, 0x40}, {0x48, 0xeb, 0xb4},
   {0x48, 0xec, 0x06}, {0x48, 0xed, 0x14}, {0x48, 0xee, 0x00}, {0x48, 0xef, 0x00},
   {0x48, 0xf0, 0x00}, {0x48, 0xf1, 0x00}, {0x48, 0xf2, 0x00}, {0x48, 0xf3, 0x00},
   {0x48, 0xf4, 0x01}, {0x48, 0xf5, 0x10}, {0x48, 0xf6, 0x00}, {0x48, 0xf7, 0x38},
   {0x48, 0xf8, 0x01}, {0x48, 0xf9, 0x00}, {0x48, 0xfa, 0x00}, {0x48, 0xfb, 0x00},
   {0x48, 0xfc, 0x00}, {0x48, 0xfd, 0x00}, {0x48, 0xfe, 0x00}, {0x48, 0xff, 0x00},
};

//******************************************************************************
//
// FUNCTION       : void dev_saa7119ConfigVideoMode(BYTE VidDecId,BYTE B_Mode)
//
// USAGE          : This function initializes SAA7119 in specified video mode
//
// INPUT          : VidDecId
//                  B_Mode
//
// OUTPUT         : None
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119ConfigVideoMode(BYTE VidDecId,BYTE B_Mode)
{
   WORD i,RegSize,RegSize2;

   VidDecId ++; 		// dummy

   switch (B_Mode)
   {
      case VDD_MODE_INIT:
         msg("VDD_MODE_INIT",0);
         RegSize = sizeof(saa7119Init_Table) / 3;
         RegSize2 = sizeof(saa7119Init_Table_ext) /3;

         for (i=0; i < RegSize; i++)
            SAA7119I2CWrite(saa7119Init_Table[i][0],saa7119Init_Table[i][1],saa7119Init_Table[i][2]);
         for (i=0; i < RegSize2; i++)
            SAA7119I2CWrite(saa7119Init_Table_ext[i][0],saa7119Init_Table_ext[i][1],saa7119Init_Table_ext[i][2]);
         break;
         /*			RegSize = sizeof(saa7119Svideo_Table) / 3;
         			RegSize2 = sizeof(saa7119Svideo_Table_ext) /3;

         			for(i=0; i < RegSize; i++)
         				SAA7119I2CWrite(saa7119Svideo_Table[i][0],saa7119Svideo_Table[i][1],saa7119Svideo_Table[i][2]);
         			for(i=0; i < RegSize2; i++)
         				SAA7119I2CWrite(saa7119Svideo_Table_ext[i][0],saa7119Svideo_Table_ext[i][1],saa7119Svideo_Table_ext[i][2]);
         			break;
         */
      case VDD_MODE_NTSC:
         msg("VDD_MODE_NTSC",0);
         SAA7119I2CWrite(0x40,0x0f, 0x2b);
         SAA7119I2CWrite(0x40,0x1c, 0xdd);
         SAA7119I2CWrite(0x40,0x1d, 0x02);
         SAA7119I2CWrite(0x40,0x1e, 0x81);
         SAA7119I2CWrite(0x40,0x1f, 0xb1);
         SAA7119I2CWrite(0x40,0x66, 0xae);
         SAA7119I2CWrite(0x40,0x68, 0xff);
         SAA7119I2CWrite(0x40,0x69, 0x03);
         SAA7119I2CWrite(0x40,0x6a, 0x80);
         SAA7119I2CWrite(0x40,0x6b, 0xbe);
         SAA7119I2CWrite(0x40,0x6c, 0x00);
         SAA7119I2CWrite(0x40,0x6d, 0x00);
         SAA7119I2CWrite(0x40,0x6e, 0x00);
         SAA7119I2CWrite(0x40,0x71, 0x8f);
         SAA7119I2CWrite(0x40,0x8f, 0x03);
         SAA7119I2CWrite(0x40,0x94, 0x06);
         SAA7119I2CWrite(0x40,0x9a, 0x06);
         SAA7119I2CWrite(0x40,0x9b, 0x81);
         SAA7119I2CWrite(0x40,0x9e, 0x00);
         SAA7119I2CWrite(0x48,0x1e, 0x4a);
         SAA7119I2CWrite(0x48,0x40, 0x58);
         SAA7119I2CWrite(0x48,0x41, 0x85);
         SAA7119I2CWrite(0x48,0x42, 0x21);
         SAA7119I2CWrite(0x48,0x44, 0xc4);
         SAA7119I2CWrite(0x48,0x48, 0xb0);
         SAA7119I2CWrite(0x48,0x49, 0x8e);
         SAA7119I2CWrite(0x48,0x4b, 0xe7);
         SAA7119I2CWrite(0x48,0x4c, 0x05);

         break;

      case VDD_MODE_PAL:
         msg("VDD_MODE_PAL",0);
         SAA7119I2CWrite(0x40,0x0f, 0x2f);
         SAA7119I2CWrite(0x40,0x1c, 0xa8);
         SAA7119I2CWrite(0x40,0x1d, 0x01);
         SAA7119I2CWrite(0x40,0x1e, 0x82);
         SAA7119I2CWrite(0x40,0x1f, 0x91);
         SAA7119I2CWrite(0x40,0x66, 0xad);
         SAA7119I2CWrite(0x40,0x68, 0x03);
         SAA7119I2CWrite(0x40,0x69, 0xff);
         SAA7119I2CWrite(0x40,0x6a, 0xff);
         SAA7119I2CWrite(0x40,0x6b, 0xad);
         SAA7119I2CWrite(0x40,0x6c, 0xfe);
         SAA7119I2CWrite(0x40,0x6d, 0xff);
         SAA7119I2CWrite(0x40,0x6e, 0x8f);
         SAA7119I2CWrite(0x40,0x71, 0x87);
         SAA7119I2CWrite(0x40,0x8f, 0x00);
         SAA7119I2CWrite(0x40,0x94, 0x00);
         SAA7119I2CWrite(0x40,0x9a, 0x38);
         SAA7119I2CWrite(0x40,0x9b, 0x01);
         SAA7119I2CWrite(0x40,0x9e, 0x38);
         SAA7119I2CWrite(0x48,0x1e, 0x52);
         SAA7119I2CWrite(0x48,0x40, 0x32);
         SAA7119I2CWrite(0x48,0x41, 0x99);
         SAA7119I2CWrite(0x48,0x42, 0x20);
         SAA7119I2CWrite(0x48,0x44, 0xc0);
         SAA7119I2CWrite(0x48,0x48, 0x30);
         SAA7119I2CWrite(0x48,0x49, 0x4c);
         SAA7119I2CWrite(0x48,0x4b, 0xcd);
         SAA7119I2CWrite(0x48,0x4c, 0x04);
         break;

      case VDD_MODE_SECAM:
         msg("VDD_MODE_SECAM",0);
         SAA7119I2CWrite(0x40,0x0e, 0x59);
         SAA7119I2CWrite(0x40,0x0f, 0x8f);
         SAA7119I2CWrite(0x40,0x1c, 0xa8);
         SAA7119I2CWrite(0x40,0x1d, 0x01);
         SAA7119I2CWrite(0x40,0x1e, 0x83);
         SAA7119I2CWrite(0x40,0x1f, 0x91);
         SAA7119I2CWrite(0x40,0x66, 0xaa);
         SAA7119I2CWrite(0x40,0x68, 0x03);
         SAA7119I2CWrite(0x40,0x69, 0xff);
         SAA7119I2CWrite(0x40,0x6a, 0xff);
         SAA7119I2CWrite(0x40,0x6b, 0xaa);
         SAA7119I2CWrite(0x40,0x6c, 0xfe);
         SAA7119I2CWrite(0x40,0x6d, 0xff);
         SAA7119I2CWrite(0x40,0x6e, 0x8f);
         SAA7119I2CWrite(0x40,0x71, 0x87);
         SAA7119I2CWrite(0x40,0x72, 0xaa);
         SAA7119I2CWrite(0x40,0x94, 0x00);
         SAA7119I2CWrite(0x40,0x9a, 0x38);
         SAA7119I2CWrite(0x40,0x9b, 0x01);
         SAA7119I2CWrite(0x40,0x9e, 0x38);
         SAA7119I2CWrite(0x48,0x1e, 0x52);
         SAA7119I2CWrite(0x48,0x40, 0x4d);
         SAA7119I2CWrite(0x48,0x41, 0xc5);
         SAA7119I2CWrite(0x48,0x42, 0x20);
         SAA7119I2CWrite(0x48,0x44, 0xcc);
         SAA7119I2CWrite(0x48,0x47, 0x0c);
         SAA7119I2CWrite(0x48,0x48, 0xe0);
         SAA7119I2CWrite(0x48,0x49, 0x47);
         SAA7119I2CWrite(0x48,0x4b, 0x95);
         break;

      default:
         break;
   } // end switch - mode
}



//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoMode(BYTE VidDecId)
//
// USAGE          : This function returns the current input video mode
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : returns the mode - NO_VIDEO, NTSC, PAL, SECAM
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoMode(BYTE VidDecId)
{
   BYTE B_Status;

   VidDecId ++;		// dummy

   B_Status = dev_saa7119Read(SAA7119_DEV_ID,SAA7119_DEC_STAT_ADDR) & SAA7119_VID_MODE_STAT_MASK;

   switch (B_Status)
   {
      case 0x01:
         return VDD_MODE_NTSC;
      case 0x02:
         return VDD_MODE_PAL;
      case 0x03:
         return VDD_MODE_SECAM;
      default:
         return (dev_saa7119Read(SAA7119_DEV_ID,SAA7119_DEC_STAT_ADDR2) & SAA7119_VID_FIELD_FRQ_MASK) ? VDD_MODE_NTSC : VDD_MODE_PAL;
   }

}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119SetVideoInput(BYTE VidDecId,BYTE B_InType)
//
// USAGE          : This function sets SAA7119 input video type
//
// INPUT          : VidDecId - COMPOSITE\SVIDEO
//                  B_InType - COMPOSITE\SVIDEO
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119SetVideoInput(BYTE VidDecId,BYTE B_InType)
{

   BYTE B_FiltCtrl;
   //WORD i, RegSize, RegSize2;
   VidDecId ++;		// dummy

   B_FiltCtrl = dev_saa7119Read(SAA7119_DEV_ID,0x09);

   switch (B_InType)
   {
      case VDD_INTYP_COMPOSITE1:
         B_FiltCtrl &= 0x7F;  //chrominance trap/comb filter active enabled
         B_InType = 0xC0;

         break;
      case VDD_INTYP_COMPOSITE2:
         B_FiltCtrl &= 0x7F;  //chrominance trap/comb filter active enabled
         B_InType = 0xC1;

         break;
      case VDD_INTYP_SVIDEO:

         B_FiltCtrl |= 0x80;  // chrominance trap/comb filter bypassed
         B_InType = 0xd6;
         break;

      case VDD_INTYP_COMPONENT:
         B_FiltCtrl |= 0x40;  // chrominance trap/comb filter bypassed
         B_InType = 0x2f;
         dev_saa7119Write(SAA7119_OVERLAY,0x01);
         break;

      default:
         return;
   }

   dev_saa7119Write(0x09,B_FiltCtrl);
   dev_saa7119Write(0x02,B_InType); //SAA7119_AIN1_ADDR
   return;
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoInput(BYTE VidDecId)
//
// USAGE          : Gets SAA7119 input video type
//
// INPUT          : VidDecId
//
// OUTPUT         : SAA7119 input video type
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoInput(BYTE VidDecId)
{
   return gmv_VideoDecoder[VidDecId].InpType;
}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119SetVideoBrightness(BYTE VidDecId,BYTE B_BrightVal)
//
// USAGE          : This function sets the brightness value for SAA7119
//
// INPUT          : VidDecId - video decoder value
//                  B_BrightVal - brightness value
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119SetVideoBrightness(BYTE VidDecId,BYTE B_BrightVal)
{
   gmv_VideoDecoder[VidDecId].Brightness = B_BrightVal;
   dev_saa7119Write(SAA7119_BRT_ADDR, B_BrightVal);
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoBrightness(BYTE VidDecId)
//
// USAGE          :Gets the brightness value for SAA7119
//
// INPUT          : VidDecId
//
// OUTPUT         : the brightness value for SAA7119
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoBrightness(BYTE VidDecId)
{
   return gmv_VideoDecoder[VidDecId].Brightness;
}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119SetVideoContrast(BYTE VidDecId,BYTE B_ContrastVal)
//
// USAGE          : This function sets the contrast value for SAA7119
//
// INPUT          : VidDecId  - video decoder id
//                  B_ContrastVal - contrast value
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119SetVideoContrast(BYTE VidDecId,BYTE B_ContrastVal)
{
   gmv_VideoDecoder[VidDecId].Contrast = B_ContrastVal;
   dev_saa7119Write(SAA7119_CON_ADDR,B_ContrastVal);
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoContrast(BYTE VidDecId)
//
// USAGE          : Gets the contrast value for SAA7119
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : the contrast value for SAA7119
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoContrast(BYTE VidDecId)
{
   return gmv_VideoDecoder[VidDecId].Contrast;
}


//******************************************************************************
//
// FUNCTION       : void dev_saa7119SetVideoHue(BYTE VidDecId,BYTE B_HueVal)
//
// USAGE          : This function sets the hue value for SAA7119
//
// INPUT          : VidDecId - video decoder id
//                  B_HueVal - hue value
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119SetVideoHue(BYTE VidDecId,BYTE B_HueVal)
{
   gmv_VideoDecoder[VidDecId].Hue = B_HueVal;
   dev_saa7119Write(SAA7119_HUE_ADDR,B_HueVal);
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoHue(BYTE VidDecId)
//
// USAGE          : Gets the hue value for SAA7119
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : the hue value for SAA7119
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoHue(BYTE VidDecId)
{
   return gmv_VideoDecoder[VidDecId].Hue;
}


//******************************************************************************
//
// FUNCTION       : void dev_saa7119SetVideoSaturation(BYTE VidDecId,BYTE B_SaturationVal)
//
// USAGE          : This function sets the saturation value for SAA7119
//
// INPUT          : VidDecId - video decoder id
//                  B_SaturationVal - saturation value
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119SetVideoSaturation(BYTE VidDecId,BYTE B_SaturationVal)
{
   gmv_VideoDecoder[VidDecId].Saturation = B_SaturationVal;
   dev_saa7119Write(SAA7119_SAT_ADDR, B_SaturationVal);
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoSaturation(BYTE VidDecId)
//
// USAGE          : Gets the saturation value for SAA7119
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : the saturation value for SAA7119
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoSaturation(BYTE VidDecId)
{
   return gmv_VideoDecoder[VidDecId].Saturation;
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoStatus(BYTE VidDecId)
//
// USAGE          : This function returns the status of the incoming video
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : 0 - Locked
//                  1 - Not Locked
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoStatus(BYTE VidDecId)
{
   BYTE B_LockStatus;

   B_LockStatus = dev_saa7119Read(SAA7119_DEV_ID, SAA7119_DEC_STAT_ADDR);

   if ((B_LockStatus & 0x40) == 0x00)
   {
      gmv_VideoDecoder[VidDecId].Status = D_LOCKED;
   }
   else
   {
      gmv_VideoDecoder[VidDecId].Status = D_NOTLOCKED;
   }

   return (gmv_VideoDecoder[VidDecId].Status);
}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119PowerUp(BYTE VidDecId)
//
// USAGE          : This function powers up the SAA7119 modules.
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      : Power Save Control
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119PowerUp(BYTE VidDecId)
{
   VidDecId++;							// Dummy
   dev_saa7119Write(0X83,0X01);

   dev_saa7119Write(0X88,0XF0);
}

//******************************************************************************
//
// FUNCTION       : void dev_saa7119PowerDown(BYTE VidDecId)
//
// USAGE          : This function powers down the SAA7119 modules.
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : None
//
// GLOBALS        : None
//
// USED_REGS      : Power Save Control
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void dev_saa7119PowerDown(BYTE VidDecId)
{
   VidDecId++;							// Dummy

   dev_saa7119Write(0X88,0X0B);
}

//******************************************************************************
//
// FUNCTION       : BYTE dev_saa7119GetVideoInterlaceInfo(BYTE VidDecId)
//
// USAGE          : This function returns the current input video interlace status
//
// INPUT          : VidDecId - video decoder id
//
// OUTPUT         : 0 - Non Interlaced
//                  1 - Interlaced
//
// GLOBALS        : None
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
BYTE dev_saa7119GetVideoInterlaceInfo(BYTE VidDecId)
{
   BYTE B_LockStatus;

   B_LockStatus = dev_saa7119Read(SAA7119_DEV_ID, SAA7119_DEC_STAT_ADDR);
   if (B_LockStatus & 0x80)
   {
      gmv_VideoDecoder[VidDecId].Interlace = D_INTERLACED;
   }
   else
   {
      gmv_VideoDecoder[VidDecId].Interlace = D_NONINTERLACED;
   }
   return gmv_VideoDecoder[VidDecId].Interlace;
}

//******************************************************************************
//
// FUNCTION       : void gm_dev_Saa7119VideoMixerControl(BYTE B_VidDecId,BOOL OnOff, gmt_VDD_MIXER_SETTING mixerSetting)
//
// USAGE          :
//
// INPUT          : B_VidDecId - video decorder id
//                  OnOff
//                  mixerSetting
//
// OUTPUT         : None
//
// GLOBALS        :
//
// USED_REGS      :
//
// PRE_CONDITION  :
//
// POST_CONDITION :
//
//******************************************************************************
void gm_dev_Saa7119VideoMixerControl(BYTE B_VidDecId,BOOL OnOff, gmt_VDD_MIXER_SETTING mixerSetting)
{
   B_VidDecId++;		// dummy
   mixerSetting ++; 	// dummy
   if (OnOff==D_MIXER_ON)
      SAA7119I2CWrite(SAA7119_DEV_ID_B,SAA7119_OSDOVERLAY,0x0A);
   else
      SAA7119I2CWrite(SAA7119_DEV_ID_B,SAA7119_OSDOVERLAY,0x02);
}

#endif
//**********************************  END  *************************************
